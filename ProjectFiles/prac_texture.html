<html>
  <head>
    <title>Simple Geometry Test</title>
  </head>

  <style>
  body {margin: 0;}
  canvas {width: 100%; height: 100%;}
  </style>

  <body>
    <!--include the three.js library-->
    <script src="js/three.js"> </script>
    <!--and the trackball code-->
    <script src="js/OrbitControls.js"> </script>

    <style>
    			body {
    				font-family: Monospace;
    				background-color: #000;
    				color: #fff;
    				margin: 0px;
    				overflow: hidden;
    			}
    			#info {
    				position: absolute;
    				top: 10px;
    				width: 100%;
    				text-align: center;
    			}
    </style>

    <div id="info">
      <p>This is the first example using threeJS<br>
      left button to rotate the scene, scroll to zoom in/out</p>
    </div>
    <script>

    //create the scene
    var scene = new THREE.Scene( );
    var ratio = window.innerWidth/window.innerHeight;
    //create the perspective camera
    //for parameters see https://threejs.org/docs/#api/cameras/PerspectiveCamera
    var camera = new THREE.PerspectiveCamera(45,ratio,0.1,1000);

    //create the orthographics camera
    //for parameters see https://threejs.org/docs/#api/cameras/OrthographicCamera
    //var scale=15/(window.innerWidth+window.innerHeight);
    //var camera = new THREE.OrthographicCamera( -window.innerWidth*scale, window.innerWidth*scale, window.innerHeight*scale, -window.innerHeight*scale, 0.1, 1000 );

    //set the camera position
    camera.position.set(0,0,15);
    // and the direction
	  camera.lookAt(0,0,1);

    //create the webgl renderer
    var renderer = new THREE.WebGLRenderer( );

    //set the size of the rendering window
    renderer.setSize(window.innerWidth,window.innerHeight);

    //add the renderer to the current document
    document.body.appendChild(renderer.domElement );

    //this function is called when the window is resized
    var MyResize = function ( )
    {
      //get the new sizes
      var width = window.innerWidth;
      var height = window.innerHeight;
      //then update the renderer
      renderer.setSize(width,height);
      //and update the aspect ratio of the camera
      camera.aspect = width/height;
      //update the projection matrix given the new values
      camera.updateProjectionMatrix();
      //and finally render the scene again
      renderer.render(scene,camera);
    };


    //link the resize of the window to the update of the camera
    window.addEventListener( 'resize', MyResize);

    
	var texture1 = new THREE.TextureLoader().load('img/text.png');
	var texture2 = new THREE.TextureLoader().load('img/brick_bump.jpg');
	var texture3 = new THREE.TextureLoader().load('img/brick_bump.jpg');
	
	//create the material of the cube (basic material)
    var material_cube = new THREE.MeshBasicMaterial( {map:texture1} );
    //set the color of the cube
    material_cube.color=  new THREE.Color(1,0,1);

    //then set the renderer to wireframe
    //material_cube.wireframe=true;
    //create the mesh of a cube
    var geometry_cube = new THREE.BoxGeometry(2,2,2);
    var cube = new THREE.Mesh(geometry_cube,material_cube);

    //create the material of the tetrahedron (basic material)
    var material_tetra = new THREE.MeshBasicMaterial( {map:texture2} );
    //set the color of the tetrahedron
    material_tetra.color=  new THREE.Color(0,1,1);
    //then set the renderer to wireframe
    //material_tetra.wireframe=true;
    var geometry_tetra = new THREE.TetrahedronGeometry(2, 0);
    var tetra = new THREE.Mesh(geometry_tetra,material_tetra);

	//draw sphere
	var material_sphere = new THREE.MeshBasicMaterial( {map:texture3} );
	material_sphere.color = new THREE.Color(1,1,0);
	var geometry_sphere = new THREE.SphereGeometry(2,32,32);
	var sphere = new THREE.Mesh(geometry_sphere,material_sphere);
	
	
    //translate base position of the created objects
    cube.position.x-=2;
    tetra.position.x+=2;
	sphere.position.y-=4;
	
    //and add to the scene
    scene.add(cube);
    scene.add(tetra);
	scene.add(sphere);

    //////////////
	// CONTROLS //
	//////////////

	// move mouse and: left   click to rotate,
	//                 middle click to zoom,
	//                 right  click to pan
  // add the new control and link to the current camera to transform its position
	controls = new THREE.OrbitControls( camera, renderer.domElement );

  //final update loop
/*
  var MyUpdateLoop = function ( )
  {
    //call the render with the scene and the camera
    renderer.render(scene,camera);
    //finally perform a recoursive call to update again
    //this must be called because the mouse change the camera position
    requestAnimationFrame(MyUpdateLoop);
  };
  
  requestAnimationFrame(MyUpdateLoop);
*/  
  function MyUpdateLoop() {
	
	requestAnimationFrame(MyUpdateLoop);
	cube.rotation.x += 0.005;
	cube.rotation.y +=0.01;
	
	tetra.rotation.x += 0.005;
	tetra.rotation.y +=0.01;
	
	sphere.rotation.x += 0.005;
	sphere.rotation.y +=0.01;
	
	renderer.render(scene,camera);
	}


	
	MyUpdateLoop();
    </script>
  </body>
</html>
